{"version":3,"file":"photos-src_services_Albums_js-src_components_HeaderNavigation_vue.js?v=5964e66a2a8c691104ea","mappings":"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","sources":["webpack:///photos/src/services/Albums.js","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=style&index=0&lang=scss&","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=style&index=1&id=809e621a&lang=scss&scoped=true&","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=template&id=809e621a&scoped=true&","webpack:///photos/src/components/HeaderNavigation.vue","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=script&lang=js&","webpack://photos/./src/components/HeaderNavigation.vue?29e2","webpack://photos/./src/components/HeaderNavigation.vue?747f","webpack://photos/./src/components/HeaderNavigation.vue?6702"],"sourcesContent":["/**\r\n * @copyright Copyright (c) 2022 Louis Chemineau <louis@chmn.me>\r\n *\r\n * @author Louis Chemineau <louis@chmn.me>\r\n *\r\n * @license AGPL-3.0-or-later\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n *\r\n */\r\n\r\nimport moment from '@nextcloud/moment'\r\nimport { translate } from '@nextcloud/l10n'\r\n\r\nimport defaultClient from '../services/DavClient.js'\r\nimport logger from '../services/logger.js'\r\nimport DavRequest from '../services/DavRequest.js'\r\nimport { genFileInfo } from '../utils/fileUtils.js'\r\n\r\n/**\r\n * @typedef {object} Album\r\n * @property {string} id - The id of the album.\r\n * @property {string} name - The name of the album.\r\n * @property {number} creationDate - The creation date of the album.\r\n * @property {string} isShared - Whether the current user as shared the album.\r\n * @property {string} isCollaborative - Whether the album can be edited by other users.\r\n * @property {number} itemCount - The number of item in the album.\r\n * @property {number} cover - The cover of the album.\r\n */\r\n\r\n/**\r\n * @param {string} extraProps - Extra properties to add to the DAV request.\r\n * @return {string}\r\n */\r\nfunction getDavRequest(extraProps = '') {\r\n\treturn `<?xml version=\"1.0\"?>\r\n\t\t\t<d:propfind xmlns:d=\"DAV:\"\r\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\"\r\n\t\t\t\txmlns:nc=\"http://nextcloud.org/ns\"\r\n\t\t\t\txmlns:ocs=\"http://open-collaboration-services.org/ns\">\r\n\t\t\t\t<d:prop>\r\n\t\t\t\t\t<nc:last-photo />\r\n\t\t\t\t\t<nc:nbItems />\r\n\t\t\t\t\t<nc:location />\r\n\t\t\t\t\t<nc:dateRange />\r\n\t\t\t\t\t<nc:collaborators />\r\n\t\t\t\t\t${extraProps}\r\n\t\t\t\t</d:prop>\r\n\t\t\t</d:propfind>`\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} path - Albums' root path.\r\n * @param {import('webdav').StatOptions} options - Options to forward to the webdav client.\r\n * @param {string} extraProps - Extra properties to add to the DAV request.\r\n * @param {import('webdav').WebDAVClient} client - The DAV client to use.\r\n * @return {Promise<Album|null>}\r\n */\r\nexport async function fetchAlbum(path, options, extraProps = '', client = defaultClient) {\r\n\ttry {\r\n\t\tconst response = await client.stat(path, {\r\n\t\t\tdata: getDavRequest(extraProps),\r\n\t\t\tdetails: true,\r\n\t\t\t...options,\r\n\t\t})\r\n\r\n\t\tlogger.debug('[Albums] Fetched an album: ', { data: response.data })\r\n\r\n\t\treturn formatAlbum(response.data)\r\n\t} catch (error) {\r\n\t\tif (error.code === 'ERR_CANCELED') {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tthrow error\r\n\t}\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} path - Albums' root path.\r\n * @param {import('webdav').StatOptions} options - Options to forward to the webdav client.\r\n * @param {string} extraProps - Extra properties to add to the DAV request.\r\n * @param {import('webdav').WebDAVClient} client - The DAV client to use.\r\n * @return {Promise<Album[]>}\r\n */\r\nexport async function fetchAlbums(path, options, extraProps = '', client = defaultClient) {\r\n\ttry {\r\n\t\tconst response = await client.getDirectoryContents(path, {\r\n\t\t\tdata: getDavRequest(extraProps),\r\n\t\t\tdetails: true,\r\n\t\t\t...options,\r\n\t\t})\r\n\r\n\t\tlogger.debug(`[Albums] Fetched ${response.data.length} albums: `, { data: response.data })\r\n\r\n\t\treturn response.data\r\n\t\t\t.filter(album => album.filename !== path)\r\n\t\t\t.map(formatAlbum)\r\n\t} catch (error) {\r\n\t\tif (error.code === 'ERR_CANCELED') {\r\n\t\t\treturn []\r\n\t\t}\r\n\r\n\t\tthrow error\r\n\t}\r\n}\r\n\r\n/**\r\n *\r\n * @param {object} album - An album received from a webdav request.\r\n * @return {Album}\r\n */\r\nfunction formatAlbum(album) {\r\n\t// Ensure that we have a proper collaborators array.\r\n\tif (album.props.collaborators === '') {\r\n\t\talbum.props.collaborators = []\r\n\t} else if (typeof album.props.collaborators.collaborator === 'object') {\r\n\t\tif (Array.isArray(album.props.collaborators.collaborator)) {\r\n\t\t\talbum.props.collaborators = album.props.collaborators.collaborator\r\n\t\t} else {\r\n\t\t\talbum.props.collaborators = [album.props.collaborators.collaborator]\r\n\t\t}\r\n\t}\r\n\r\n\t// Extract custom props.\r\n\talbum = genFileInfo(album)\r\n\r\n\t// Compute date range label.\r\n\tconst dateRange = JSON.parse(album.dateRange?.replace(/&quot;/g, '\"') ?? '{}')\r\n\tif (dateRange.start === null) {\r\n\t\tdateRange.start = moment().unix()\r\n\t\tdateRange.end = moment().unix()\r\n\t}\r\n\tconst dateRangeFormatted = {\r\n\t\tstartDate: moment.unix(dateRange.start).format('MMMM YYYY'),\r\n\t\tendDate: moment.unix(dateRange.end).format('MMMM YYYY'),\r\n\t}\r\n\tif (dateRangeFormatted.startDate === dateRangeFormatted.endDate) {\r\n\t\talbum.date = dateRangeFormatted.startDate\r\n\t} else {\r\n\t\talbum.date = translate('photos', '{startDate} to {endDate}', dateRangeFormatted)\r\n\t}\r\n\r\n\treturn album\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} path - Albums' root path.\r\n * @param {import('webdav').StatOptions} options - Options to forward to the webdav client.\r\n * @param {import('webdav').WebDAVClient} client - The DAV client to use.\r\n * @return {Promise<Array>}\r\n */\r\nexport async function fetchAlbumContent(path, options, client = defaultClient) {\r\n\ttry {\r\n\t\tconst response = await client.getDirectoryContents(path, {\r\n\t\t\tdata: DavRequest,\r\n\t\t\tdetails: true,\r\n\t\t\t...options,\r\n\t\t})\r\n\r\n\t\tconst fetchedFiles = response.data\r\n\t\t\t.map(file => genFileInfo(file))\r\n\t\t\t.filter(file => file.fileid)\r\n\r\n\t\tlogger.debug(`[Albums] Fetched ${fetchedFiles.length} new files: `, fetchedFiles)\r\n\r\n\t\treturn fetchedFiles\r\n\t} catch (error) {\r\n\t\tif (error.code === 'ERR_CANCELED') {\r\n\t\t\treturn []\r\n\t\t}\r\n\r\n\t\tlogger.error('Error fetching album files', { error })\r\n\t\tconsole.error(error)\r\n\r\n\t\tthrow error\r\n\t}\r\n}\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--photos-navigation-height: 64px;--photos-navigation-spacing: calc((var(--photos-navigation-height) - 44px) / 2)}button.app-navigation-toggle{top:0 !important;right:calc(var(--photos-navigation-height)*-1) !important;margin:var(--photos-navigation-spacing) !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/HeaderNavigation.vue\"],\"names\":[],\"mappings\":\"AAsLA,MACC,gCAAA,CAEA,+EAAA,CAID,6BAEC,gBAAA,CACA,yDAAA,CACA,kDAAA\",\"sourcesContent\":[\"$sizes: (\\\"400\\\": (\\\"count\\\": 3, \\\"marginTop\\\": 66, \\\"marginW\\\": 8), \\\"700\\\": (\\\"count\\\": 4, \\\"marginTop\\\": 66, \\\"marginW\\\": 8), \\\"1024\\\": (\\\"count\\\": 5, \\\"marginTop\\\": 66, \\\"marginW\\\": 44), \\\"1280\\\": (\\\"count\\\": 4, \\\"marginTop\\\": 66, \\\"marginW\\\": 44), \\\"1440\\\": (\\\"count\\\": 5, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"1600\\\": (\\\"count\\\": 6, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"2048\\\": (\\\"count\\\": 7, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"2560\\\": (\\\"count\\\": 8, \\\"marginTop\\\": 88, \\\"marginW\\\": 88), \\\"3440\\\": (\\\"count\\\": 9, \\\"marginTop\\\": 88, \\\"marginW\\\": 88), \\\"max\\\": (\\\"count\\\": 10, \\\"marginTop\\\": 88, \\\"marginW\\\": 88));\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n:root {\\r\\n\\t--photos-navigation-height: 64px;\\r\\n\\t// header height - button size\\r\\n\\t--photos-navigation-spacing: calc((var(--photos-navigation-height) - 44px) / 2);\\r\\n}\\r\\n\\r\\n// Properly position the navigation toggle button\\r\\nbutton.app-navigation-toggle {\\r\\n\\t// App-navigation have a 4px margin top\\r\\n\\ttop: 0 !important;\\r\\n\\tright: calc(var(--photos-navigation-height) * -1) !important;\\r\\n\\tmargin: var(--photos-navigation-spacing) !important;\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".photos-navigation[data-v-809e621a]{position:-webkit-sticky;position:sticky;z-index:20;top:0;display:flex;align-items:center;width:100%;min-height:var(--photos-navigation-height);padding:0 var(--photos-navigation-height);background:var(--color-main-background)}.photos-navigation__back[data-v-809e621a]{position:absolute !important;left:0;margin:var(--photos-navigation-spacing) !important}.photos-navigation__title[data-v-809e621a]{max-width:50%;margin-right:calc(2*var(--photos-navigation-spacing));display:flex;flex-direction:column}.photos-navigation__title__main[data-v-809e621a]{margin:0;cursor:pointer}.photos-navigation__title__main[data-v-809e621a],.photos-navigation__title__sub[data-v-809e621a]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.photos-navigation__loader[data-v-809e621a]{margin-left:32px}.photos-navigation__content-right[data-v-809e621a]{display:flex;align-items:center;justify-content:center;margin-left:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/HeaderNavigation.vue\"],\"names\":[],\"mappings\":\"AAuMA,oCACC,uBAAA,CAAA,eAAA,CACA,UAAA,CACA,KAAA,CACA,YAAA,CACA,kBAAA,CACA,UAAA,CACA,0CAAA,CACA,yCAAA,CACA,uCAAA,CAEA,0CAEC,4BAAA,CACA,MAAA,CACA,kDAAA,CAGD,2CACC,aAAA,CACA,qDAAA,CACA,YAAA,CACA,qBAAA,CAEA,iDACC,QAAA,CACA,cAAA,CAGD,iGACC,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,4CACC,gBAAA,CAGD,mDACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,gBAAA\",\"sourcesContent\":[\"$sizes: (\\\"400\\\": (\\\"count\\\": 3, \\\"marginTop\\\": 66, \\\"marginW\\\": 8), \\\"700\\\": (\\\"count\\\": 4, \\\"marginTop\\\": 66, \\\"marginW\\\": 8), \\\"1024\\\": (\\\"count\\\": 5, \\\"marginTop\\\": 66, \\\"marginW\\\": 44), \\\"1280\\\": (\\\"count\\\": 4, \\\"marginTop\\\": 66, \\\"marginW\\\": 44), \\\"1440\\\": (\\\"count\\\": 5, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"1600\\\": (\\\"count\\\": 6, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"2048\\\": (\\\"count\\\": 7, \\\"marginTop\\\": 88, \\\"marginW\\\": 66), \\\"2560\\\": (\\\"count\\\": 8, \\\"marginTop\\\": 88, \\\"marginW\\\": 88), \\\"3440\\\": (\\\"count\\\": 9, \\\"marginTop\\\": 88, \\\"marginW\\\": 88), \\\"max\\\": (\\\"count\\\": 10, \\\"marginTop\\\": 88, \\\"marginW\\\": 88));\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\r\\n.photos-navigation {\\r\\n\\tposition: sticky;\\r\\n\\tz-index: 20;\\r\\n\\ttop: 0;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\twidth: 100%;\\r\\n\\tmin-height: var(--photos-navigation-height);\\r\\n\\tpadding: 0 var(--photos-navigation-height);\\r\\n\\tbackground: var(--color-main-background);\\r\\n\\r\\n\\t&__back {\\r\\n\\t\\t// Above the navigation menu\\r\\n\\t\\tposition: absolute !important;\\r\\n\\t\\tleft: 0;\\r\\n\\t\\tmargin: var(--photos-navigation-spacing) !important;\\r\\n\\t}\\r\\n\\r\\n\\t&__title {\\r\\n\\t\\tmax-width: 50%;\\r\\n\\t\\tmargin-right: calc(2 * var(--photos-navigation-spacing));\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\r\\n\\t\\t&__main {\\r\\n\\t\\t\\tmargin: 0;\\r\\n\\t\\t\\tcursor: pointer;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t&__main, &__sub {\\r\\n\\t\\t\\toverflow: hidden;\\r\\n\\t\\t\\twhite-space: nowrap;\\r\\n\\t\\t\\ttext-overflow: ellipsis;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t&__loader {\\r\\n\\t\\tmargin-left: 32px;\\r\\n\\t}\\r\\n\\r\\n\\t&__content-right {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tmargin-left: auto;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photos-navigation\",class:{'photos-navigation--root': _vm.isRoot},attrs:{\"role\":\"toolbar\"}},[(!_vm.isRoot)?_c('NcButton',{staticClass:\"photos-navigation__back\",attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.folderUp},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ArrowLeft',{attrs:{\"size\":20}})]},proxy:true}],null,false,1821202730)}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"photos-navigation__title\"},[_c('h2',{staticClass:\"photos-navigation__title__main\",on:{\"click\":_vm.refresh}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"photos-navigation__title__sub\"}),_vm._v(\" \"),_vm._t(\"subtitle\")],2),_vm._v(\" \"),(_vm.$slots.default)?_c('div',{staticClass:\"photos-navigation__content\"},[_vm._t(\"default\")],2):_vm._e(),_vm._v(\" \"),_c('NcLoadingIcon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"photos-navigation__loader\"}),_vm._v(\" \"),_c('div',{staticClass:\"photos-navigation__content-right\"},[_vm._t(\"right\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n - @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\r\n -\r\n - @author John Molakvoæ <skjnldsv@protonmail.com>\r\n -\r\n - @license AGPL-3.0-or-later\r\n -\r\n - This program is free software: you can redistribute it and/or modify\r\n - it under the terms of the GNU Affero General Public License as\r\n - published by the Free Software Foundation, either version 3 of the\r\n - License, or (at your option) any later version.\r\n -\r\n - This program is distributed in the hope that it will be useful,\r\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n - GNU Affero General Public License for more details.\r\n -\r\n - You should have received a copy of the GNU Affero General Public License\r\n - along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n -\r\n -->\r\n\r\n<template>\r\n\t<div :class=\"{'photos-navigation--root': isRoot}\" class=\"photos-navigation\" role=\"toolbar\">\r\n\t\t<!-- Back navigation button -->\r\n\t\t<NcButton v-if=\"!isRoot\"\r\n\t\t\tclass=\"photos-navigation__back\"\r\n\t\t\ttype=\"tertiary\"\r\n\t\t\t@click=\"folderUp\">\r\n\t\t\t<template #icon>\r\n\t\t\t\t<ArrowLeft :size=\"20\" />\r\n\t\t\t</template>\r\n\t\t</NcButton>\r\n\r\n\t\t<!-- Main Navigation title -->\r\n\t\t<div class=\"photos-navigation__title\">\r\n\t\t\t<h2 class=\"photos-navigation__title__main\" @click=\"refresh\">\r\n\t\t\t\t{{ name }}\r\n\t\t\t</h2>\r\n\t\t\t<div class=\"photos-navigation__title__sub\" />\r\n\t\t\t<slot name=\"subtitle\" />\r\n\t\t</div>\r\n\r\n\t\t<!-- Main slot -->\r\n\t\t<div v-if=\"$slots.default\" class=\"photos-navigation__content\">\r\n\t\t\t<slot />\r\n\t\t</div>\r\n\r\n\t\t<NcLoadingIcon v-show=\"loading\" class=\"photos-navigation__loader\" />\r\n\r\n\t\t<div class=\"photos-navigation__content-right\">\r\n\t\t\t<slot name=\"right\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport ArrowLeft from 'vue-material-design-icons/ArrowLeft.vue'\r\n\r\nimport { NcButton, NcLoadingIcon } from '@nextcloud/vue'\r\n\r\nexport default {\r\n\tname: 'HeaderNavigation',\r\n\r\n\tcomponents: {\r\n\t\tArrowLeft,\r\n\t\tNcButton,\r\n\t\tNcLoadingIcon,\r\n\t},\r\n\r\n\tinheritAttrs: false,\r\n\r\n\tprops: {\r\n\t\tloading: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tpath: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '/',\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\trootTitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: t('photos', 'Photos'),\r\n\t\t},\r\n\t\t// The route params\r\n\t\tparams: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tisRoot() {\r\n\t\t\tconst isRoot = this.path === '/'\r\n\t\t\tthis.toggleNavigationButton(!isRoot)\r\n\t\t\treturn isRoot\r\n\t\t},\r\n\r\n\t\tname() {\r\n\t\t\tif (this.isRoot) {\r\n\t\t\t\treturn this.rootTitle\r\n\t\t\t}\r\n\t\t\treturn this.title\r\n\t\t},\r\n\r\n\t\tparentPath() {\r\n\t\t\tconst path = this.path.split('/')\r\n\t\t\tpath.pop()\r\n\t\t\tconst parent = path.join('/')\r\n\t\t\treturn this.isRoot || parent.trim() === ''\r\n\t\t\t\t? '/'\r\n\t\t\t\t: path.join('/')\r\n\t\t},\r\n\r\n\t\tparentName() {\r\n\t\t\treturn this.parentPath && this.parentPath.split('/').pop()\r\n\t\t},\r\n\r\n\t\tbackToText() {\r\n\t\t\tif (this.parentPath === '/') {\r\n\t\t\t\treturn t('photos', 'Back to {folder}', { folder: this.rootTitle })\r\n\t\t\t}\r\n\t\t\treturn t('photos', 'Back to {folder}', { folder: this.parentName })\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * We do not want encoded slashes when browsing by folder\r\n\t\t * so we generate a new valid route object, get the final url back\r\n\t\t * decode it and use it as a direct string, which vue-router\r\n\t\t * does not encode afterwards\r\n\t\t *\r\n\t\t * @return {string|object}\r\n\t\t */\r\n\t\tto() {\r\n\t\t\t// always remove first slash, the router\r\n\t\t\t// manage it automatically\r\n\t\t\tconst regex = /^\\/?(.*)/i\r\n\t\t\tconst path = regex.exec(this.parentPath)[1]\r\n\r\n\t\t\t// apply to current route\r\n\t\t\tconst { name, params } = Object.assign({}, this.$route, {\r\n\t\t\t\tparams: this.params || { path },\r\n\t\t\t})\r\n\r\n\t\t\t// return the full object as we don't care about\r\n\t\t\t// an empty path if this is route\r\n\t\t\tif (path === '') {\r\n\t\t\t\treturn { name }\r\n\t\t\t}\r\n\r\n\t\t\t// returning a string prevent vue-router to encode it again\r\n\t\t\treturn decodeURIComponent(this.$router.resolve({ name, params }).resolved.path)\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tfolderUp() {\r\n\t\t\tthis.$router.push(this.to)\r\n\t\t},\r\n\r\n\t\trefresh() {\r\n\t\t\tthis.$emit('refresh')\r\n\t\t},\r\n\r\n\t\ttoggleNavigationButton(hide) {\r\n\t\t\t// Hide the navigation toggle if the back button is shown\r\n\t\t\tconst navigationToggle = document.querySelector('button.app-navigation-toggle')\r\n\t\t\tif (navigationToggle !== null) {\r\n\t\t\t\tnavigationToggle.style.display = hide ? 'none' : null\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n:root {\r\n\t--photos-navigation-height: 64px;\r\n\t// header height - button size\r\n\t--photos-navigation-spacing: calc((var(--photos-navigation-height) - 44px) / 2);\r\n}\r\n\r\n// Properly position the navigation toggle button\r\nbutton.app-navigation-toggle {\r\n\t// App-navigation have a 4px margin top\r\n\ttop: 0 !important;\r\n\tright: calc(var(--photos-navigation-height) * -1) !important;\r\n\tmargin: var(--photos-navigation-spacing) !important;\r\n}\r\n\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n.photos-navigation {\r\n\tposition: sticky;\r\n\tz-index: 20;\r\n\ttop: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n\tmin-height: var(--photos-navigation-height);\r\n\tpadding: 0 var(--photos-navigation-height);\r\n\tbackground: var(--color-main-background);\r\n\r\n\t&__back {\r\n\t\t// Above the navigation menu\r\n\t\tposition: absolute !important;\r\n\t\tleft: 0;\r\n\t\tmargin: var(--photos-navigation-spacing) !important;\r\n\t}\r\n\r\n\t&__title {\r\n\t\tmax-width: 50%;\r\n\t\tmargin-right: calc(2 * var(--photos-navigation-spacing));\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\r\n\t\t&__main {\r\n\t\t\tmargin: 0;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\r\n\t\t&__main, &__sub {\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\t}\r\n\r\n\t&__loader {\r\n\t\tmargin-left: 32px;\r\n\t}\r\n\r\n\t&__content-right {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: auto;\r\n\t}\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=1&id=809e621a&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=1&id=809e621a&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./HeaderNavigation.vue?vue&type=template&id=809e621a&scoped=true&\"\nimport script from \"./HeaderNavigation.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderNavigation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./HeaderNavigation.vue?vue&type=style&index=1&id=809e621a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"809e621a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["getDavRequest","extraProps","fetchAlbum","path","options","client","defaultClient","stat","data","details","response","logger","formatAlbum","code","fetchAlbums","getDirectoryContents","length","filter","album","filename","map","props","collaborators","collaborator","Array","isArray","genFileInfo","dateRange","JSON","parse","replace","start","moment","unix","end","dateRangeFormatted","startDate","format","endDate","date","translate","fetchAlbumContent","DavRequest","fetchedFiles","file","fileid","error","console","___CSS_LOADER_EXPORT___","push","module","id","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","this","_h","$createElement","_c","_self","staticClass","class","isRoot","attrs","_e","on","folderUp","scopedSlots","_u","key","fn","proxy","_v","refresh","_s","name","_t","$slots","directives","rawName","value","expression"],"sourceRoot":""}